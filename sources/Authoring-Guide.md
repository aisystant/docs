# AG.0 - Гайд по подготовке и загрузке руководств МИМ в Aisystant

Версия от 2026-02-15

На обсуждение.

# AG.1 - Общие принципы

## AG.1:1 - Один файл — одно руководство

Каждое руководство представлено одним файлом в формате Markdown (.md).

В своём репозитории автор может вести работу в любом удобном формате, но в официальный репозиторий передаётся один склеенный файл в формате, который описан в этом гайде.

Далее Aisystant cможет автоматически генерировать любые представления (разбитые на части, в разных форматах и т.д.) в зависимости того, куда это руководство будет "транслироваться". Автору не нужно об этом заботиться, если он предоставил файл с соблюдением формата из этого гайда.

**Почему один файл:**

| Аргумент | Пояснение |
|----------|-----------|
| **Удобство для использовани в RAG** | Современные LLM (ChatGPT, Claude, ...) без проблем работают с большими файлами, загружая их в RAG. Имея один файл, участники наших семинаров и резидентур смогут загружать его в своё пространство одним действием (подтверждтается множеством запросов после семинара по FPF). |
| **Пересылка и хранение** | Один файл легко переслать по почте, загрузить в Google Docs, сохранить локально. Нет необходимости архивировать и распаковывать. |
| **Версионирование** | Diff-ы и история изменений отслеживаются в одном месте, а не в десятках разных файлов |
| **Генерация разных view** | Из одного файла можно автоматически сгенерировать любое количество представлений: разбить по разделам для веб-читалки, сформировать дерево навигации, выделить только текст без картинок для RAG. |
| **Простота для авторов** | Автор работает с одним, а не с десятком файлов. В одном файле порядок разделов определяется их расположением внутри этого файла. Автору не нужно думать об именовании файлов для обеспечения правильного порядка, следить за консистентностью метаданных, придумывать имена файлам или сталкиваться с ограничениями файловых систем (если он хочет использовать спецсимволы, которые нельзя использовать в имени файла). В одном файле проще работать с полнотектовым поиском (поиск по всему документу — один запрос). |



## AG.1:2 - Workflow по публикации для авторов

Готовая версия файла руководства передаётся в мастер-репозиторий через Pull Request (PR) в ветку `main`.

Мастер-данные всех руководств хранятся в репозитории https://github.com/aisystant/docs/

**Процесс:**

1. Автор завершает работу над версией в своём репозитории
2. Автор склеивает файлы в один (если вёл в нескольких)
3. Автор создаёт PR в мастер-репозиторий (ветка `main`)
4. Автоматически запускается проверка формата (CI)
5. Если проверка прошла, автор проверяет руководство в "песочнице" Aisystant (TODO: будет отдельная инструкция).
6. Автор принимает PR (merge)
7. Руководство публикуется на все ресурсы МИМ.

После попадания в ветку `main` руководство автоматически становится доступно на публичных ресурсах МИМ:

| Ресурс         | Описание                                                     | URL                          |
| -------------- | ------------------------------------------------------------ | ---------------------------- |
| **LMS**        | LMS для прохождения с руководств                             | `aisystant.system-school.ru` |
| **Docs**       | Открытая витрина всех руководств                             | `docs.system-school.ru`      |
| **MCP для ИИ** | Сервис для ИИ-агентов (Model Context Protocol), позволяющий агентам получать тексты руководств | интеграция через MCP         |


## AG.1:End


# AG.2 - Внутренняя структура документа

## AG.2:1 - Стандарт Markdown

CommonMark + GitHub Flavored Markdown (GFM). Файл должен быть в кодировке UTF-8.

## AG.2:2 - Уровни заголовков

Стандартные заголовки Markdown (хэши `#`, `##`, `###`) для обозначения уровней вложенности.

| Уровень | Markdown | Назначение |
|---------|-----------|------------|
| H1 | `#` | Раздел |
| H2 | `##` | Подраздел |
| H3 | `###` | Подраздел внутри подраздела (под-подраздел) |

Соблюдайте следующие правила:

- **Важно:** В LMS (aisystant.system-school.ru) содержимым страницы является только текст подраздела (H2). Текст, написанный между заголовком раздела (`#`) и первым подразделом (`##`), **не отобразится** в LMS. Не пишите там важный контент.
  - Исключение: разделы без подразделов (только текст, без вложенных H2/H3). Такие "листовые" разделы могут быть только в начале руководства для вводной части. Пример: [руководство "R5" (Системное мышление)](https://aisystant.system-school.ru/lk/#/course/systems-thinking-r5/2026-01-07T1640/72864).
- Для разделов (`#`) обязательно должен быть макер завершения раздела (см. `AG.2:9`).

С точки зрения LMS (aisystant.system-school.ru) и публичной витрины курсов (docs.system-school.ru) основной единицей контента является **подраздел** - т.е. это та самая страница, которая отображается читателю (кроме исключения для вводных разделов, которое описано выше). Для заголовков 3 и 4 уровня действую следующие правила отображения:

- Заголовки 3 уровня (под-подразделов) визуально будут отображаться как выделенный жирным абзац внутри страницы (подраздела). 
- Заголовки 4 уровня и выше будут отображаться как абзац обычного текста.

**Неправильно** (текст раздела потеряется):

```markdown
# R0.1 - Заголовок раздела
Этот важный текст будет ПОТЕРЯН при импорте в LMS — не пишите так!

## R0.1:1 - Заголовок подраздела
Текст подраздела (будет отображаться)
```

**Правильно** (всё содержимое — в подразделах):

```markdown
# R0.1 - Заголовок раздела

## R0.1:1 - Заголовок подраздела
Весь важный текст пишите здесь, в подразделе.
```

**Исключение** (листовой раздел без подразделов — только в начале руководства):

```markdown
# R0.0 - Введение
Этот текст будет отображаться, потому что у раздела нет подразделов.
Использование H2/H3 внутри такого раздела не допускается.

# R0.1 - Заголовок раздела

## R0.1:1 - Заголовок подраздела
Текст подраздела.
```



## AG.2:3 - Синтаксис заголовка

```
<Хэши уровня заголовка> <Табельный номер заголовка> - <Название>
```

- Между хэшами и Табельным номером — **один пробел**
- Между Табельным номером и названием — **пробел, дефис, пробел** (` - `)

Подробнее про формат табельного номера описано дальше в `AG.2:5`.

**Правильно:**

```markdown
# R5.1 - О мышлении
## R5.1:3 - Эмерджентность и разделение труда
```

**Неправильно:**

```markdown
# R5.1 О мышлении     (нет дефиса)
# R5.1-О мышлении     (нет пробелов)
# R5.1 — О мышлении   (тире вместо дефиса)
##R5.1:6 - Разные мышления  (нет пробела после хэшей)
```



## AG.2:4 - Табельные номера

Каждый заголовок должен иметь уникальный идентификатор — табельный номер (аналогично тому, как сделано в FPF).

> *«Табельный номер» - как у HR: каждому сотруднику присваивается уникальный номер, который не меняется даже при смене фамилии или должности. Аналогично, табельные номера внутри руководства прежними при любом изменении их названия.*

**Для чего это сделано**:

- **Уникальная адресация:** табельный номер однозначно идентифицирует любой раздел, независимо от его названия.
- **Устойчивость к переименованию**: при обновлении руководства раздел может быть переименован. Если система (например, LMS или публичная витрина руководств) ориентируется на название, она не найдёт раздел. Табельный номер — константа.
- **Ссылки в коммуникации**: в чате наставник пишет: «посмотри раздел R5.2:3». Это однозначно и компактно. Ссылка по названию («посмотри раздел про моделирование во втором разделе») не так однозначна.
- **RAG-совместимость**: при поиске в большом документе LLM ориентируется на табельные номера. Поиск по названию («моделирование системы») даст множество ложных срабатываний.
- Дополнительные "побочный" эффект: решится проблема со **сбросом отметок о прохождении руководств в LMS при переименовании подразделов**. Например, резидент МИМ прошёл в руководстве подраздел «Введение в моделирование». В новой версии руководства этот подраздел называется «Основы моделирования». Без табельного номера при обновлении руководства отметки о прохождении прошлой версии будут сброшены, а с ним - получится сохранить "наследование" при обновлении (TODO: функциональность проверки обновления по табельным номерам - надо будет доделать, но после того, как примем общее для МИМ решение об использовании табельных номеров).
- Табельный номер будет использоваться в URL (вместо длинных текстовых назвнаий подразделов)

## AG.2:5 - Формат табельного номера

В зависимости от уровня загловка табельный номер состоит из кода руководства, плюс коды раздела, подраздела и под-подраздела.

```
КодРуководства.КодРаздела[:КодПодраздела[.КодПодПодраздела]]
```

| Элемент                        | Описание                                                     |
| ------------------------------ | ------------------------------------------------------------ |
| **Точка (`.`)**                | Разделяет код руководства от номера раздела                  |
| **Двоеточие (`:`)**            | Разделяет уровень раздела от уровня подраздела. Визуально различимо: `R5.1` — это раздел, `R5.1:1` — это подраздел внутри раздела. |

Пример для заголовка подраздела:

```markdown
## R5.1:3 - Заголовок подраздела
```

```
Хеши       Код          Код       Код
заголовка  Руководства  Раздела   Подраздела
  |        |           |         |
  ▼        ▼           ▼         ▼
+----+   +-----+     +---+     +---+
| ## |   |  R5 |  .  | 1 |  :  | 3 |
+----+   +-----+     +---+     +---+
           ^           ^         ^
           |           |         |
     КодРуководства    |    КодПодраздела
                  КодРаздела
```

Пример для заголовка раздела:

```markdown
# R5.1 - Заголовок раздела
```

Пример для заголовка под-подраздела:

```markdown
## R5.1:3.1 - Заголовок под-подраздела
```

**Важно:** Табельный номер — это идентификатор, а не порядковый номер. Он однозначно идентифицирует раздел, подраздел, под-подраздел. Если вы удалите подраздел `R5.1:2`, следующий новый подраздел будет `R5.1:3`, а не переименованный `R5.1:2`. При обновлении руководства Aisystant будет сверять табельные номера, а не названия или позиции.

**Общие правила:**

1. Коды руководства назначается централизованно (TODO: договориться, через кого централизовано регистрируем коды). Не придумывайте свои коды. Реестр текущих кодов см. `AG.2:7`
2. В качестве кодов разделов, подразделов, под-подразделов могут быть буквы любого алфавита и цифры (пробелы, точки, двоеточие и любые другие спецсимволы недопустимы), но следует стараться делать табельные номера компактными, так как они будут отображаться в дереве навигации по руководству и занимать место.
3. В пределах руководства табельные номера должны быть уникальны.
4. Сквозная нумерация не требуется — нумерация отражает логическую структуру.
5. При удалении раздела/подраздела/под-подраздела его номер нельзя использовать его повторно, если на его месте другой по смыслу раздел/подраздел/под-подраздел. Новый раздел получает следующий свободный номер (или любой буквенный код, который не использовался ранее).
6. У кодов подразделов, которые являются заданиями, есть типизация под ключевому слову. См. `AG.5`.

**Пример:**

```markdown
# R5.1 - О мышлении

## R5.1:1 - Разные мышления
(удалён автором в новой версии)

## R5.1:15 - Новое понятие
(новый первый подраздел в обновлённой версии, но его номер 15, т.к. 1-14 уже были использованы ранее)
... 

## R5.1:Case1 - Вопросы: аффордансы
(существует)

## R5.1:14 - Критерии сильного мышления
(существует)

```



## AG.2:6 - Соответствие уровня заголовка и формата табельного номера

**Правило:** Уровень заголовка определяет формат табельного номера.

| Уровень | Markdown | Формат номера | Пример |
|---------|----------|---------------|--------|
| Раздел | `#` | `Код.X` | `# AG.2 - Название` |
| Подраздел | `##` | `Код.X:Y` | `## AG.2:2 - Название` |
| Под-подраздел | `###` | `Код.X:Y.Z` | `### AG.2:2.1 - Название` |

**Неправильно:**

```markdown
## AG.3 - Название           (H2, но номер без двоеточия — как у раздела)
### AG.3:1 - Название        (H3, но номер с одним двоеточием — как у подраздела)
```

**Правильно:**

```markdown
# AG.3 - Название            (H1 — номер раздела)
## AG.3:1 - Название         (H2 — номер подраздела)
### AG.3:1.1 - Название      (H3 — номер под-подраздела)
```

Суть: **количество "уровней" в номере должно соответствовать уровню заголовка** — один уровень (X) для H1, два уровня (X:Y) для H2, три уровня (X:Y.Z) для H3.


## AG.2:7 - Коды руководств

**Для программы Рабочее развитие:**

| Код руководства | Название |
|-----------------|-------------|
| `R1` | Распожаризация: как не «тушить пожары», а избегать их появления |
| `R2` | Моделирование как основа коммуникации и лидерства |
| `R3` | Рабочее моделирование в инженерии и менеджменте |
| `R4` | Причинность, интервенции и контрфактичность в инженерии и менеджменте |
| `R5` | Системное мышление |
| `R6` | Системное моделирование |
| `R7` | Методология |
| `R8` | Системная инженерия |
| `R9` | Инженерия мастерства |
| `R10` | Системный менеджмент |

**Для программы Личное развитие:**

| Код руководства | Название |
| --------------- | -------- |
| `TODO`          | TODO     |

## AG.2:8 - Типы подразделов

**Правило:** Тип раздела определяется по ключевому слову в табельном номере или заголовке.

**Поддерживаемые типы:**

TODO: это предварительная версия, будет актуализироваться!

| Тип                          | Ключевое слово                      | Пример табельного номера | Правила разметки                       |
| ---------------------------- | ----------------------------------- | ------------------------ | -------------------------------------- |
| **Текст**                    | любое, кроме зарезервированных ниже | `R5.1:1`                 | Обычный текст с MD-разметкой. См. `AG.3` |
| **Кейсы**                    | `Case`, `Test`, `Quiz`              | `R5.1:Case1`             | См. `AG.5:2`                               |
| **Задание на моделирование** | `Mod` или `Modelling`               | `R5.1:Mod1`              | См. `AG.5:3`                               |
| **Чеклист**                  | `Checklist`, `Tasks`                | `R5.1:Check1`            | См. `AG.5:1`                               |

**Примеры:**

```markdown
### R5.1:Tasks1 - Задания. Контринтуитивность и метанойя.
Вопросы задания...

### R5.2:Case1 - Кейс: проектирование системы управления складом
Описание кейса...

### R5.3:Mod1 - Моделирование: выбор рабочего проекта
Описание упражнения (таблицы)...
```



## AG.2:9 - Маркеры завершения раздела

**Правило:** Каждый раздел (уровень `#`) должен заканчиваться маркером завершения. Маркер задается в виде заголовка второго уровня с "футером" (`:End`).

```markdown
## R5.1:End
```

**Пример:**

```markdown
# R5.1 - О мышлении

## R5.1:1 - Понятия, используемые в системном мышлении
Текст подраздела...

## R5.1:2 - Место системного мышления среди других мышлений
Текст подраздела...

## R5.1:End

# R5.2 - Наш вариант системного мышления
...
## R5.2:End
```

**Для чего это сделано:**

- Для LLM и RAG наличие футера ( `:End`) критично, так как это упрощает логику обработки текста. Вместо условия «искать, пока не сменится номер на следующий» (что работает хуже), используется четкое условие «дойти до конца раздела». Это предотвращает «подтягивание» лишних сущностей из следующего паттерна, если искомое слово не было найдено в текущем. Явный `:End` даёт чёткую границу.
- При необходимости вставить новый материал автору проще найти **конец предыдущего раздела**, чем ориентироваться только на начало следующего. Человеку трудно отследить глазами момент окончания одного подраздела и начала другого только по количеству «решеток» (хэшей) в MD-разметке.

**Почему именно `:End`, а не `## End` или `---`:**

- `:End` продолжает логику табельных номеров — это часть нумерации, а не отдельная сущность
- Два хэша (`##`) соответствуют уровню подраздела, что логично: маркер находится на том же уровне, что и подразделы
- `---` (горизонтальная линия) — это визуальный элемент, а не структурный маркер. Парсер может его игнорировать.


## AG.2:10 - Чеклист валидации файла

Перед отправкой PR проверьте:

- [ ] Все заголовки H1 имеют табельный номер формата `Код.X`
- [ ] Все заголовки H2 имеют табельный номер формата `Код.X:Y` или `Код.X:End`
- [ ] Все заголовки H3 имеют табельный номер формата `Код.X:Y.Z`
- [ ] Каждый раздел (H1) завершается маркером `## Код.X:End`
- [ ] Табельные номера уникальны и соответствуют правилам из `AG.2:5`–`AG.2:8`
- [ ] Между заголовком раздела (H1) и первым подразделом (H2) нет важного текста — он будет потерян при импорте

**Пример документа:** этот файл (`Authoring-Guide.md`) соответствует всем правилам из гайда и может использоваться как референс.


## AG.2:End


# AG.3 - Элементы форматирования текста
## AG.3:1 - Маркированные списки
TODO
Используйте символ `*` (звёздочку)

```markdown
* Первый пункт
* Второй пункт
  * Подпункт
* Третий пункт
```

**Мотивация:**

| Символ | Почему |
|--------|--------|
| `*` (звёздочка) | Классический Markdown, поддерживается всеми парсерами. |
| `-` (дефис) | Также допустим в Markdown, но может конфликтовать с дефисами в тексте (например, в диалогах: — Привет!). |

Рекомендация: используйте `*` для консистентности.

## AG.3:2 - Нумерованные списки

```markdown
1. Первый шаг
2. Второй шаг
3. Третий шаг
```

## AG.3:3 - Сноски
TODO
https://github.com/markdown-it/markdown-it-footnote

## AG.3:4 - Жирный шрифт

Используйте `**текст**`.


## AG.3:5 - Курсив

Используйте `*текст*`

## AG.3:6 - Код-спаны (инлайн-код)

Используйте `` `код-спаны` `` для:

- Упоминаний табельных номеров разделов, подразделов, под-подразделов (`R5.1`, `SM.3:4`)
- Названий типов (`System`, `Holon`)
- Ключевых слов (`MUST`, `SHOULD`)

```markdown
Раздел `R5.1:2` описывает границы системы.

Тип `System` является подтипом `Holon`.
```

## AG.3:7 - Цитаты и замечания

```markdown
> **Note.** Важное примечание о содержимом.

> **Warning.** Типичная ошибка, которую следует избегать.

> **Tip.** Рекомендация для лучшего понимания.
```

## AG.3:8 - Таблицы

Используйте таблицы GFM (GitHub Flavored Markdown) для структурированных данных.

```markdown
| Столбец 1 | Столбец 2 | Столбец 3 |
|-----------|-----------|-----------|
| Значение 1 | Значение 2 | Значение 3 |
| Значение 4 | Значение 5 | Значение 6 |
```

## AG.3:9 - Ссылки внутри документа

Для ссылок на другие разделы используйте табельные номера в тексте.

```markdown
Подробнее о системах см. раздел `R5.2`. О границах систем — раздел `R5.2:2`.
```

**Мотивация:**

- Ссылки по названию («см. раздел «Что такое система»») ломаются при переименовании
- Ссылки по табельному номеру (`R5.2:1`) работают всегда
- Табельный номер в код-спане (`` `R5.2:1` ``) легко найти полнотекстовым поиском

**Для веб-представления:** Парсер может автоматически превратить `` `R5.2:1` `` в кликабельную ссылку.

## AG.3:End

# AG.4 - Картинки

## AG.4:1 - Вариант 1: Base64 внутри файла

Картинка встраивается прямо в Markdown в формате data URL:

```markdown
![Описание картинки](data:image/png;base64,iVBORw0KGgoAAAANS...)
```

**Плюсы:**

- Один файл содержит всё
- Удобно передавать и хранить

**Минусы:**

- Файл становится большим
- Текст редактировать сложнее (но можно вставить все base64 картинок в самый конец файла)

## AG.4:2 - Вариант 2: Отдельные файлы

Картинки хранятся в отдельной папке рядом с MD-файлом:

```
R5-системное-мышление/
├── R5.md
└── R5-images/
    ├── image-01.png
    ├── image-02.png
    └── ...
```

В тексте ссылка на картинку:

```markdown
![Описание](images/image-01.png)
```

**Плюсы:**

- MD-файл остаётся компактным
- Картинки можно редактировать отдельно
- Для загрузки в RAG не надо вырезать из текста base64 картинок руками.

**Минусы:**

- Нужна папка с файлами
- Сложнее передавать

Используйте **Вариант 1 (base64)** если:

- Мало картинок или они небольшие
- Важна простота передачи одним файлом

Используйте **Вариант 2 (папка)** если:

- Много картинок или они большие
- MD-файл становится слишком большим для редактирования

> **Примеры использования обоих вариантов будут добавлены позже.**



## AG.4:3 - Поддерживаемые форматы файлов картинки

- PNG для схем и диаграмм

- JPEG для фотографий.


## AG.4:End

# AG.5 - Задания

## AG.5:1 - Чек-листы

TODO

## AG.5:2 - Кейсы

TODO

## AG.5:3 - Задания на моделирование

TODO

## AG.5:End


# AG.6 - Ответы на вопросы

## AG.6:1 - Как преобразовать руководство из Google Docs?

Google Docs умеет экспортировать в Markdown (File → Download → Markdown). Картинки при экспорте встраиваются как Base64. При необходимости их можно вынести в отдельные файлы скриптом.

## AG.6:2 - Как преобразовать руководство из Word-файла?

Word-документы можно конвертировать в Markdown:
- Встроенными средствами (сохранение как .txt с последующей обработкой)
- Сторонними конвертерами (pandoc)
- LLM (загрузите DOCX в Claude и попросите конвертировать)
- Загрузить файл в Google Docs и воспользоваться инструкцией выше


## AG.6:End
